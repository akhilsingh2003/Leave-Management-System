@page
@model Assingment.Pages.Leave.ApplyLeaveModel
@{
}
<div class="d-inline-flex">
    <div>
        <h1>Apply Leave</h1>
    </div>
    <div>
        <a asp-page="/Leave/AppliedList">
            <button style="width:100px; height:60px; margin-left:900px; margin-top:2px; background-color:darkgreen; color:white; border-radius:4px; "> Applied  </button>

        </a>
    </div>
</div>
<form asp-action="Create" method="post" enctype="multipart/form-data">
    <div style="max-width: 600px;
    margin: 0 auto;
    padding: 30px;
    text-align: center;
    margin-top: 10px;
    font-size:medium;
    justify-content:space-between;
    font-weight:600;
    border: 2px solid black;
    border-radius: 5px;
    background-color:gold
">
        <div class="form-group row">
            <label for="LeaveCategory" class="col-sm-2 col-form-label">Leave Category</label>
            <div class="col-sm-10">

                @Html.DropDownListFor(x => x.LeaveCategory, new SelectList(@Model.LeaveCategoryList),
                         "Select Leave Category", new { @class = "form-control" })

            </div>
        </div>
        <div class="form-group row">
            <label for="StartDate" class="col-sm-2 col-form-label">Start Date</label>
            <div class="col-sm-10">

                <input type="date" id="startDate" class="form-control" name="startDate" min="@DateTime.Now.ToString("yyyy-MM-dd")" />

            </div>
        </div>
        <br />
        <div class="form-group row">
            <label for="EndDate" class="col-sm-2 col-form-label">End Date</label>
            <div class="col-sm-10">

                <input type="date" id="endDate" class="form-control" name="endDate" onchange="calculateDuration()" min="@DateTime.Now.ToString("yyyy-MM-dd")"/>

            </div>
        </div>
        <br />
        <div class="form-group row">
            <label for="Duration" class="col-sm-2 col-form-label">Duration</label>
            <div class="col-sm-10">

                <input type="text" id="duration" class="form-control" name="duration" onchange="calculateDuration()">

            </div>
        </div>

        <br />
        <div class="form-group row">
            <label for="Reason" class="col-sm-2 col-form-label">Reason</label>
            <div class="col-sm-10">
                @Html.TextAreaFor(m => m.Reason, new { placeholder = "Reason", @class = "form-control" })
                @Html.ValidationMessageFor(m => m.Reason)
            </div>
        </div>
        <br />
        <br />
       
        <div class="form-group row">
            <label for="Document" class="col-sm-2 col-form-label">Document</label>
            <div class="col-sm-10">  
                    <input type="file" name="Document" class="form-control" />
            
            </div>
        </div>
        <br />
        <div class="form-group row">
            <label for="Phone" class="col-sm-2 col-form-label">Status</label>
            <div class="col-sm-10">

                @Html.DropDownListFor(x => x.Status, new SelectList(@Model.StatusList),
                         "Select Status", new { @class = "form-control" })

            </div>
        </div>
        <br />
        <button type="submit" class="btn btn-primary">Create</button>
    </div>

</form>

@section Scripts {
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    <script>
        function calculateDuration() {
            var startDate = new Date(document.getElementById("startDate").value);
            var endDate = new Date(document.getElementById("endDate").value);
            var diffTime = endDate.getTime() - startDate.getTime();
            var diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            document.getElementById("duration").value = diffDays;
        }
    </script>

}